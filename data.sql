CREATE DATABASE imagenologia;

CREATE TABLE usuarios (
	id SERIAL,
	rut varchar(12) UNIQUE NOT NULL,
	email varchar(100) NOT NULL,
	nombres varchar(20) NOT NULL,
	primer_apellido varchar(20) NOT NULL,
	segundo_apellido varchar(20) NULL,
	sexo varchar(10) NOT NULL,
	fecha_nacimiento date NOT NULL,
	edad varchar(10) NOT NULL,
	password varchar(20) NOT NULL,
	direccion varchar(50) NOT NULL,
	comuna varchar(20) NOT NULL,
	telefono varchar(15) NOT NULL,
	prevision varchar(10) NOT NULL,
	medico bool NOT NULL DEFAULT false,
	admin bool NULL DEFAULT false,
	PRIMARY KEY (id)
);

CREATE TABLE estado_fichas (--estado horas
	id SERIAL,
	nombre VARCHAR(45), --pendiente--resuelto-
	PRIMARY KEY (id)
);

CREATE TABLE tipos_examenes (
	id SERIAL,
	nombre VARCHAR (45),
	PRIMARY KEY (id)
);

CREATE TABLE examenes (
	id SERIAL,
	id_tipo_examen INT REFERENCES tipos_examenes(id),
	codigo VARCHAR(150) UNIQUE,
	nombre_examen VARCHAR (255),
	PRIMARY KEY (id)	
);

CREATE TABLE horas (
	id SERIAL,
	meses VARCHAR (10),
	dias INT,
	hora bool DEFAULT true,
	PRIMARY KEY (id)
);

CREATE TABLE ficha_examen (
	id SERIAL,
	id_usuario INT REFERENCES usuarios (id),
	id_examen INT REFERENCES examenes (id),
	id_estado INT REFERENCES estado_fichas (id),--estado_horas
	id_horas INT REFERENCES horas (id),
	comentario VARCHAR (255),
	orden_medica VARCHAR (255),
	PRIMARY KEY (id)
);

--resultados

--Scanner
--0403001
--TAC  DE CRANEO ENCEFALICA, CEREBRO
--0403002
--TAC  DE HIPOTALAMO-HIPOFISIS O SILLA TURCA
--0403003
--TAC COMPUTARIZADA DE FOSA POSTERIOR O ANGULO PONTOCEREBELO
--0403006
--TAC COMPUTARIZADA DE TEMPORAL-OIDOTAC COMPUTARIZADA DE TEMPORAL-OIDO
--0403007
--TAC  ORBITAS MAXILOFACIAL /CAVIDADES PERINASALE
--0403008
--TAC  DE COLUMNA CERVICAL
--0403012
--TAC  DE CUELLO, PARTES BLANDAS
--0403013
--TAC  DE TORAX. INCLUYE ADEMAS: ESTERNON
--0403014
--TAC  DE ABDOMEN (HIGADO, VIAS Y VESICULA ), PIELOTAC 
--0403016
--TAC  DE PELVIS (ADEMAS INCLUYE SACRO
--0403017
--TAC  MUSCULOESQUELETICA POR ZONA ANATOMICA O EXTREMIDADES EST LOC
--403018
--TAC  DE COLUMNA DORSAL	
--403019
--TAC  DE COLUMNA LUMBAR	
--0403020
--TAC  DE ABDOMEN Y PELVIS
--403101
--TAC  ANGIO O ANGIOTAC DE ENCEFALO O  CEREBRO
--403103
--TAC  ANGIO O ANGIOTAC DE ABDOMEN
--403104
--TAC  ANGIO O ANGIOTAC DE CUELLO
--403105

--Radiografia
--401002
--CAVUM, LARINGE
--401004
--TORAX PLACA EXTRA
--401006
--CAVIDADES CARDIACAS
--0401009
--TORAX SIMPLE
--0401013
--ABDOMEN SIMPLE
--0401014
--ABDOMEN SIMPLE PROYECCION COMPLEMENTARIA
--0401028
--RENAL SIMPLE
--0401029
--VESICAL SIMPLE
--0401031
--NARIZ,ORBITA,MAXILAR INFERIOR,MAXILAR SUPERIOR,ATM,CP
--0401032
--CRANEO
--0401033
--CRANEO EXTRA
--0401035
--OÍDO
--0401040	
--SILLA TURCA
--0401042
--COLUMNA CERVICAL
--0401043
--COLUMNA CERVICAL OBLICUAS
--0401044
--COLUMNA CERVICAL FUNCIONALES
--0401045
--COLUMNA DORSAL,COLUMNA DORSAL OBLICUAS,COLUMNA DORSOLUMBAR
--0401046
--COLUMNA LUMBOSACRA
--0401047
--COLUMNA LUMBOSACRA FUNCIONALES
--0401048
--COLUMNA LUMBOSACRA OBLICUAS
--0401049
--COLUMNA TOTAL O DORSOLUMBAR PANORAMICA
--0401051
--CADERA
--0401151
--PELVIS
--0401052
--CADERA EXTRA
--0401053
--SACROILIACAS,SACROCOXIS
--0401054
--PIE,MUÑECA,MANO,CODO,BRAZO,TOBILLO
--0401055
--CLAVÍCULA
--0401056
--MANO EDAD OSEA
--0401057
--EDAD OSEA RODILLA
--0401058
--ESCAFOIDES
--0401059
--MUÑECA F-L OBLICUA, TOBILLO F-L OBLICUA
--0401060
--EXTREMIDADES INFERIORES,RODILLA,PIERNA,ESTERNON,FEMUR,HOMBRO,COSTILLAS
--0401062	
--PROYECCION ESPECIAL
--401070
--TORAX AP-L
--401151
--PELVIS LACTANTE O MENOR SEIS AÑOS,CADERA O COXOFEMORAL LACTANTE O MENOR SEIS AÑOS

--Ecografia
--404003
--ECOTOMOGRAFIA ABDOMINAL
--404005
--ECO TV OBSTETRICA,ECOGRAFÍA TRANSVAGINAL
--404006
--ECOGRAFÍA PELVIANA FEMENINA U OBSTÉTRICA
--404009
--ECOTOMOGRAFIA PELVIANA MASCULINA
--404010
--ECOGRAFÍA RENAL (BILATERAL), O DE BAZO
--404012
--ECOGRAFÍA MAMARIA BILATERAL (INCLUYE DOPPLER)
--404014
--ECOGRAFÍA TESTICULAR (UNO O AMBOS)
--404015
--ECOGRAFÍA TIROIDEA (INCLUYE DOPPLER)
--404016
--ECOGRAFIA PARTES BLANDAS O MUSCULOESQUELETICA

--Mes
--Enero
--Febrero
--Marzo
--Abril
--Mayo
--Junio
--Julio
--Agosto
--Septiembre
--Octubre
--Noviembre
--Diciembre

--Dias
--1
--2
--3
--4
--5
--6
--7
--8
--9
--10
--11
--12
--13
--14
--15
--16
--17
--18
--19
--20
--21
--22
--23
--24
--25
--26
--27
--28
--29
--30
--31

--horas
--8:20
--8:40
--9:00
--9:20
--9:40
--10:00
--10:20
--10:30
